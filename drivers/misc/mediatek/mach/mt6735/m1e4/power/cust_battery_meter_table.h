#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#endif

#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,68237},
        {-15,53650},
        {-10,42506},
        { -5,33892},
        {  0,27219},
        {  5,22021},
        { 10,17926},
        { 15,14674},
        { 20,12081},
        { 25,10000},
        { 30,8315},
        { 35,6948},
        { 40,5834},
        { 45,4917},
        { 50,4161},
        { 55,3535},
        { 60,3014}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0,	4186},
	{2,	4166},
	{4,	4143},
	{6,	4090},
	{8,	4070},
	{10,	4044},
	{12,	4017},
	{14,	3998},
	{16,	3983},
	{18,	3973},
	{20,	3964},
	{22,	3955},
	{24,	3944},
	{26,	3933},
	{28,	3921},
	{30,	3909},
	{32,	3898},
	{34,	3887},
	{36,	3877},
	{38,	3868},
	{40,	3861},
	{42,	3853},
	{44,	3845},
	{46,	3839},
	{49,	3833},
	{51,	3827},
	{53,	3822},
	{55,	3816},
	{57,	3810},
	{59,	3805},
	{61,	3800},
	{63,	3795},
	{65,	3790},
	{67,	3784},
	{69,	3779},
	{71,	3773},
	{73,	3768},
	{75,	3761},
	{77,	3755},
	{79,	3747},
	{81,	3740},
	{83,	3730},
	{85,	3721},
	{87,	3713},
	{89,	3709},
	{91,	3703},
	{93,	3694},
	{95,	3665},
	{97,	3599},
	{99,	3510},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350}
};
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
	{0,	4174},
	{2,	4134},
	{3,	4111},
	{5,	4097},
	{6,	4086},
	{8,	4075},
	{10,	4055},
	{11,	4030},
	{13,	4010},
	{15,	3996},
	{16,	3986},
	{18,	3978},
	{19,	3972},
	{21,	3964},
	{23,	3956},
	{24,	3950},
	{26,	3940},
	{28,	3932},
	{29,	3924},
	{31,	3914},
	{32,	3907},
	{34,	3897},
	{36,	3888},
	{37,	3877},
	{39,	3866},
	{41,	3855},
	{42,	3845},
	{44,	3836},
	{45,	3829},
	{47,	3822},
	{49,	3816},
	{50,	3811},
	{52,	3806},
	{53,	3802},
	{55,	3799},
	{57,	3796},
	{58,	3792},
	{60,	3790},
	{62,	3787},
	{63,	3785},
	{65,	3784},
	{66,	3782},
	{68,	3781},
	{70,	3779},
	{71,	3777},
	{73,	3774},
	{75,	3771},
	{76,	3766},
	{78,	3761},
	{79,	3756},
	{81,	3751},
	{83,	3744},
	{84,	3735},
	{86,	3728},
	{88,	3718},
	{89,	3707},
	{91,	3702},
	{92,	3700},
	{94,	3695},
	{96,	3680},
	{97,	3618},
	{99,	3522},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350}
};

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
	{0,	4346},
	{1,	4338},
	{2,	4320},
	{3,	4308},
	{5,	4281},
	{6,	4270},
	{8,	4244},
	{9,	4239},
	{11,	4217},
	{13,	4193},
	{14,	4187},
	{16,	4157},
	{17,	4151},
	{19,	4128},
	{20,	4117},
	{22,	4101},
	{24,	4085},
	{25,	4074},
	{27,	4051},
	{28,	4040},
	{30,	4025},
	{31,	4015},
	{33,	3993},
	{35,	3980},
	{36,	3973},
	{38,	3953},
	{39,	3950},
	{41,	3925},
	{42,	3911},
	{44,	3896},
	{46,	3879},
	{47,	3872},
	{49,	3863},
	{50,	3857},
	{52,	3847},
	{53,	3845},
	{55,	3832},
	{57,	3823},
	{58,	3819},
	{60,	3809},
	{61,	3808},
	{63,	3799},
	{64,	3798},
	{66,	3793},
	{68,	3786},
	{69,	3783},
	{71,	3779},
	{72,	3777},
	{74,	3773},
	{75,	3771},
	{77,	3761},
	{79,	3753},
	{80,	3749},
	{82,	3737},
	{83,	3733},
	{85,	3720},
	{86,	3710},
	{88,	3690},
	{90,	3688},
	{91,	3687},
	{93,	3685},
	{94,	3683},
	{96,	3672},
	{97,	3644},
	{99,	3563},
	{100,	3500}
};

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
	{0,	4192},
	{2,	4170},
	{3,	4152},
	{5,	4136},
	{6,	4120},
	{8,	4104},
	{10,	4089},
	{11,	4074},
	{13,	4060},
	{15,	4046},
	{16,	4033},
	{18,	4019},
	{19,	4007},
	{21,	3995},
	{23,	3983},
	{24,	3972},
	{26,	3960},
	{28,	3950},
	{29,	3939},
	{31,	3930},
	{32,	3920},
	{34,	3910},
	{36,	3902},
	{37,	3893},
	{39,	3883},
	{40,	3871},
	{42,	3856},
	{44,	3843},
	{45,	3833},
	{47,	3825},
	{49,	3819},
	{50,	3813},
	{52,	3807},
	{53,	3802},
	{55,	3797},
	{57,	3792},
	{58,	3788},
	{60,	3785},
	{62,	3781},
	{63,	3777},
	{65,	3774},
	{66,	3771},
	{68,	3769},
	{70,	3765},
	{71,	3757},
	{73,	3748},
	{75,	3742},
	{76,	3737},
	{78,	3730},
	{79,	3725},
	{81,	3720},
	{83,	3714},
	{84,	3705},
	{86,	3696},
	{87,	3687},
	{89,	3675},
	{91,	3672},
	{92,	3669},
	{94,	3665},
	{96,	3648},
	{97,	3592},
	{99,	3505},
	{100,	3350},
	{100,	3350},
	{100,	3350},
	{100,	3350}
};     

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
	{0,	0}, 
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0}
};  

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
	{193,	4186},
	{193,	4166},
	{193,	4143},
	{298,	4090},
	{355,	4070},
	{365,	4044},
	{373,	4017},
	{383,	3998},
	{388,	3983},
	{393,	3973},
	{395,	3964},
	{398,	3955},
	{390,	3944},
	{385,	3933},
	{380,	3921},
	{375,	3909},
	{373,	3898},
	{368,	3887},
	{365,	3877},
	{368,	3868},
	{368,	3861},
	{368,	3853},
	{365,	3845},
	{368,	3839},
	{370,	3833},
	{373,	3827},
	{375,	3822},
	{378,	3816},
	{375,	3810},
	{375,	3805},
	{380,	3800},
	{380,	3795},
	{383,	3790},
	{380,	3784},
	{380,	3779},
	{380,	3773},
	{383,	3768},
	{380,	3761},
	{380,	3755},
	{378,	3747},
	{380,	3740},
	{375,	3730},
	{375,	3721},
	{378,	3713},
	{393,	3709},
	{410,	3703},
	{435,	3694},
	{450,	3665},
	{445,	3599},
	{470,	3510},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350},
	{488,	3350}
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
	{180,	4174},
	{180,	4134},
	{190,	4111},
	{198,	4097},
	{200,	4086},
	{205,	4075},
	{205,	4055},
	{208,	4030},
	{210,	4010},
	{215,	3996},
	{223,	3986},
	{225,	3978},
	{233,	3972},
	{233,	3964},
	{235,	3956},
	{243,	3950},
	{238,	3940},
	{243,	3932},
	{245,	3924},
	{243,	3914},
	{250,	3907},
	{245,	3897},
	{240,	3888},
	{235,	3877},
	{228,	3866},
	{220,	3855},
	{210,	3845},
	{205,	3836},
	{203,	3829},
	{203,	3822},
	{200,	3816},
	{200,	3811},
	{200,	3806},
	{200,	3802},
	{203,	3799},
	{205,	3796},
	{205,	3792},
	{208,	3790},
	{208,	3787},
	{208,	3785},
	{210,	3784},
	{213,	3782},
	{215,	3781},
	{213,	3779},
	{215,	3777},
	{213,	3774},
	{213,	3771},
	{210,	3766},
	{205,	3761},
	{208,	3756},
	{210,	3751},
	{208,	3744},
	{205,	3735},
	{208,	3728},
	{208,	3718},
	{203,	3707},
	{203,	3702},
	{215,	3700},
	{225,	3695},
	{245,	3680},
	{233,	3618},
	{255,	3522},
	{288,	3350},
	{288,	3350},
	{288,	3350},
	{288,	3350}
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
	{98,	4346},
	{98,	4338},
	{97,	4320},
	{99,	4308},
	{99,	4281},
	{100,	4270},
	{102,	4244},
	{103,	4239},
	{100,	4217},
	{95,	4193},
	{95,	4187},
	{92,	4157},
	{92,	4151},
	{93,	4128},
	{93,	4117},
	{96,	4101},
	{96,	4085},
	{95,	4074},
	{97,	4051},
	{98,	4040},
	{100,	4025},
	{103,	4015},
	{102,	3993},
	{104,	3980},
	{107,	3973},
	{108,	3953},
	{111,	3950},
	{111,	3925},
	{109,	3911},
	{106,	3896},
	{106,	3879},
	{103,	3872},
	{104,	3863},
	{106,	3857},
	{104,	3847},
	{104,	3845},
	{103,	3832},
	{101,	3823},
	{101,	3819},
	{101,	3809},
	{102,	3808},
	{99,	3799},
	{102,	3798},
	{101,	3793},
	{102,	3786},
	{102,	3783},
	{100,	3779},
	{102,	3777},
	{106,	3773},
	{104,	3771},
	{111,	3761},
	{110,	3753},
	{109,	3749},
	{108,	3737},
	{108,	3733},
	{106,	3720},
	{106,	3710},
	{108,	3690},
	{111,	3688},
	{112,	3687},
	{121,	3685},
	{127,	3683},
	{137,	3672},
	{135,	3644},
	{138,	3563},
	{153,	3500}
}; 

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
	{115,	4192},
	{88,	4170},
	{88,	4152},
	{90,	4136},
	{90,	4120},
	{90,	4104},
	{90,	4089},
	{93,	4074},
	{93,	4060},
	{93,	4046},
	{93,	4033},
	{93,	4019},
	{95,	4007},
	{95,	3995},
	{93,	3983},
	{98,	3972},
	{95,	3960},
	{98,	3950},
	{98,	3939},
	{103,	3930},
	{105,	3920},
	{103,	3910},
	{110,	3902},
	{113,	3893},
	{115,	3883},
	{113,	3871},
	{103,	3856},
	{95,	3843},
	{93,	3833},
	{93,	3825},
	{93,	3819},
	{95,	3813},
	{95,	3807},
	{93,	3802},
	{95,	3797},
	{93,	3792},
	{93,	3788},
	{98,	3785},
	{98,	3781},
	{95,	3777},
	{98,	3774},
	{100,	3771},
	{103,	3769},
	{103,	3765},
	{95,	3757},
	{90,	3748},
	{93,	3742},
	{93,	3737},
	{90,	3730},
	{90,	3725},
	{93,	3720},
	{95,	3714},
	{90,	3705},
	{90,	3696},
	{93,	3687},
	{88,	3675},
	{90,	3672},
	{95,	3669},
	{100,	3665},
	{100,	3648},
	{103,	3592},
	{110,	3505},
	{135,	3350},
	{135,	3350},
	{135,	3350},
	{135,	3350}
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
	{0,	0}, 
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0},
	{0,	0}
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

